# SMMV-Collabフレームワーク：AI協働型開発エコシステム

## 概要
SMMV-Collabは人間と生成AIの高度な協働を実現する包括的な設計フレームワークです。
モダンなエンタープライズ開発とAIとの協働を強化するハイブリッドアプローチを採用し、設計/実装/テスト/レビュー/可視化/自動化を一貫して支援。
AIと人間の両方のナレッジを最大限に活用し、継続的改善にフォーカスします。

## 1. 設計思想とパターン

### 1.1 コア設計原則

#### SOLID原則
- **単一責任の原則（SRP）**: 各モジュールとクラスに単一の責任を割り当て
- **開放/閉鎖の原則（OCP）**: 既存コードを修正せずに機能拡張を可能にする設計
- **リスコフの置換原則（LSP）**: 継承・依存関係における上位互換性の保証
- **インターフェース分離の原則（ISP）**: 大きなインターフェースを避け、コンテキスト単位に分割
- **依存性逆転の原則（DIP）**: すべての依存関係は「抽象」に対して行う

#### 構造主義設計
- 明確なレイヤードアーキテクチャの採用
- Entity、Service、Repository、DTO、UseCaseの厳密な区分
- 各レイヤー内を「意味単位」で明確に区分

#### モジュール思考
- 再利用性の高いモジュール設計の促進
- OCP・LSPとの連携による交換/差し替え可能性の向上
- ユースケースやドメインサービスを「独立したモジュール」として設計

### 1.2 アーキテクチャ設計
- クリーンアーキテクチャの原則に基づく設計
- レイヤードアーキテクチャ（インフラ層が最下層）
- MVC（Controller/View/Modelの分離）パターンの採用

### 1.3 モダン開発標準

#### DDD（ドメイン駆動設計）
- Entity、Value Object、Domain Service、Repository、Domain Eventの活用
- 限定コンテキストとドメイン層へのロジック集中
- ビジネスルールの一貫性と堅牢性の確保

#### マイクロサービス設計
- サービスごとの独立展開とAPIゲートウェイによる統合
- イベント駆動設計によるマイクロサービス間連携
- 境界コンテキストに基づくサービス分割

#### エンタープライズ標準パターン
- DTO、DAO、Adapter、Strategy、Decorator、Logger、Exceptionの標準化
- 明示的な契約による層間通信

## 2. AI親和性強化

- AIが理解しやすい構造化・命名規約の採用
- AI専用サービス層（AIHelper、AIStrategy）の導入
- AIフィードバックループの組み込み
- AIプロンプト最適化対応のテンプレート/メタデータ設計
- AIと人間の双方が同じ構造原則に従うことでレビュー効率向上

## 3. 自動化と継続的改善

### 3.1 テンプレート駆動開発
- コードおよびプロンプトテンプレートの整備
- 言語別テンプレート（Python、Java、TypeScript）の提供
- 各レイヤーとコンポーネントタイプに対する標準的なテンプレート定義

### 3.2 自動化プロセス

#### GitHub Actions連携
- メタデータ検証スクリプト `validate_metadata.py` の実行
- 成功スクリプトの自動保管とバージョン管理
- 自動ドキュメント生成とアーティファクト作成

#### テストファーストとTDD支援
- AIによるテストコード自動生成
- レイヤー別テスト戦略の実施

### 3.3 可視化支援
- YAML/JSONメタデータに基づくGraphviz構造図生成
- 開発/レビュー時のアーキテクチャ理解支援
- システム全体の依存関係の可視化

### 3.4 成功スクリプトの管理と再利用
- CI完了時に成功スクリプトを自動アーカイブ（成功日時や用途メタデータ付与）
- 類似コード検出時にAIが過去スクリプトとのマージ・再利用を提案
- コードスニペットライブラリの構築と維持

### 3.5 スクリプトの自動分割・モジュール化
- スクリプト肥大化時にAIが自動で機能単位に分離（Service/Utilsなど）
- import依存関係の自動補正
- コードの複雑性と保守性の最適化

## 4. 標準ガイドライン

- ログ・エラー・ドキュメントにメタデータ（ファイル名/関数名/行数）を付与
- YAML/JSONによるメタ情報の構造化
- トレーサビリティとAI/CI/CD親和性の向上
- 各レイヤー別の命名規約と責任範囲の明確化

## 5. オプション拡張

- OpenAPI/Swaggerの自動生成
- モニタリング（Sentry/Datadog）連携
- IaC（Terraform/Pulumi）テンプレート統合
- AIによる「成功スクリプト・ナレッジDB」構築
- 開発者向けトレーニング資料とナレッジベースの整備

## 6. ディレクトリ構成例

```
src/
├── presentation/           # プレゼンテーション層
│   ├── controllers/        # コントローラー
│   ├── views/              # ビュー
│   ├── components/         # UI コンポーネント
│   └── validators/         # 入力バリデーター
│
├── application/            # アプリケーション層
│   ├── services/           # アプリケーションサービス
│   ├── usecases/           # ユースケース
│   ├── dtos/               # データ転送オブジェクト
│   └── interfaces/         # アプリケーション層のインターフェース
│
├── domain/                 # ドメイン層
│   ├── entities/           # エンティティ
│   ├── value-objects/      # 値オブジェクト
│   ├── services/           # ドメインサービス
│   ├── repositories/       # リポジトリインターフェース
│   └── events/             # ドメインイベント
│
├── infrastructure/         # インフラストラクチャ層
│   ├── persistence/        # 永続化
│   │   ├── repositories/   # リポジトリ実装
│   │   └── orm/            # ORM マッピング
│   ├── external/           # 外部サービス
│   │   ├── api/            # 外部API連携
│   │   └── ai/             # AI API連携
│   ├── logging/            # ロギング
│   └── messaging/          # メッセージング
│
├── shared/                 # 共有モジュール
│   ├── utils/              # ユーティリティ
│   ├── constants/          # 定数
│   └── exceptions/         # 例外クラス
│
└── tests/                  # 自動テスト、検証スクリプト
```

## 7. 依存関係の流れ

```
[ View (UI/表示) ]
    ↓ 依存
[ ApplicationService (入力処理/制御) ]
    ↓ 依存 (抽象インターフェースに対して)
[ UseCase (業務フロー) ]
    ↓ 依存 (抽象インターフェースに対して)
[ Domain (ビジネスルール/エンティティ) ]
    ↑ 実装
[ Infrastructure (外部連携/永続化) ]
```

## 8. AIプロンプト最適化例

```
「Applicationレイヤーに、注文確認プロセスを処理する新しいUseCaseクラスをSOLID原則および明示的な契約に準拠して実装してください。
このUseCaseは OrderRepository と PaymentGateway に依存します。エラー処理とログ出力も含めてください。」
```

## 9. 推奨活用フロー

1. 設計時にAI補完とメタデータ付きコードテンプレートで初期実装
2. CI/CDで成功スクリプト自動保管と類似コード時にAIが過去スクリプト提案
3. スクリプト肥大時はAIが自動的に分割モジュール化を支援
4. Graphvizによる可視化とドキュメントの自動生成
5. チームでナレッジ共有と継続的改善サイクルを実現

## 10. メタ原則

- **構造化**: すべての要素は明確な構造と位置づけを持つ
- **モジュール化**: 機能と責任は適切な粒度でモジュール化される
- **AI協調**: フレームワーク構造はAIが理解しやすく、意図に沿ったコード生成を促進
- **一貫性**: すべての設計判断は一貫した原則に基づいて行われる
- **拡張性**: システムは変更に対して柔軟かつ堅牢
- **フィードバックループ**: 開発プロセスにおける定期的なフィードバックと改善を実施

このフレームワークを活用することで、人間開発者と生成AIがより効率的に協働し、
高品質で拡張性の高いソフトウェアを継続的に構築・改善できます。
